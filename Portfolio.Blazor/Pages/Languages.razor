@page "/languages"
@inject HttpClient http
@inject ProjectApiService portfolioApi
@inject NavigationManager navaManager
@using Portfolio.Shared
@using Portfolio.Shared.ViewModels 

<h3>Languages</h3>

<div>
    @foreach(var lan in languages)
    {
        <br />
        <label><a class="text-primary">@lan.Name</a></label>
        <button @onclick="() => deleteLanguageFromDatabase(lan)">Delete</button>
    }
</div>

@code {
    private IEnumerable<Language> languages = new List<Language>();

    protected override async Task OnInitializedAsync()
    {
        languages = await portfolioApi.GetLanguageAsync();
    }

    private async Task deleteLanguageFromDatabase(Language language)
    {
        await portfolioApi.DeleteLanguageAsync(language);
        await RefreshLanguageAsync();
    }

    private async Task RefreshLanguageAsync()
    {
        languages = await portfolioApi.GetLanguageAsync();
    }
}
